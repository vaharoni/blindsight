var controller = function() {
  this.trigger = '#nt-shape-comparison';

  this.name = 'NT shape comparison';

  // Ruby:
  //  (%w(R T).product([1, 2]).product(%w(R T).product([-1, -2])) * 8).shuffle
  this.params = [[["R", 1], ["R", -2]], [["R", 1], ["T", -2]], [["R", 2], ["R", -1]], [["T", 2], ["R", -1]],
    [["R", 2], ["R", -1]], [["T", 2], ["T", -1]], [["T", 2], ["T", -1]], [["R", 2], ["R", -1]], [["T", 2], ["R", -1]],
    [["R", 2], ["T", -1]], [["R", 2], ["R", -1]], [["R", 1], ["T", -1]], [["R", 1], ["R", -1]], [["R", 1], ["R", -2]],
    [["T", 1], ["T", -1]], [["T", 1], ["R", -1]], [["R", 1], ["R", -2]], [["T", 1], ["T", -1]], [["T", 2], ["T", -1]],
    [["R", 1], ["T", -1]], [["T", 1], ["R", -2]], [["T", 1], ["R", -2]], [["R", 2], ["T", -1]], [["R", 1], ["R", -1]],
    [["R", 2], ["R", -2]], [["R", 1], ["R", -1]], [["T", 1], ["R", -2]], [["T", 1], ["R", -1]], [["R", 1], ["T", -2]],
    [["T", 1], ["R", -2]], [["R", 1], ["T", -2]], [["T", 1], ["R", -2]], [["T", 1], ["T", -2]], [["T", 2], ["T", -2]],
    [["T", 1], ["R", -1]], [["R", 1], ["T", -1]], [["T", 2], ["R", -1]], [["T", 2], ["T", -2]], [["R", 1], ["T", -2]],
    [["T", 1], ["R", -2]], [["T", 2], ["T", -1]], [["R", 1], ["R", -1]], [["R", 1], ["T", -1]], [["T", 2], ["T", -2]],
    [["T", 2], ["R", -2]], [["R", 1], ["R", -2]], [["T", 1], ["T", -1]], [["R", 1], ["T", -2]], [["T", 2], ["R", -2]],
    [["R", 2], ["T", -2]], [["T", 2], ["T", -1]], [["R", 2], ["T", -1]], [["R", 1], ["T", -1]], [["R", 2], ["R", -2]],
    [["R", 2], ["R", -2]], [["R", 2], ["T", -2]], [["R", 1], ["T", -1]], [["T", 1], ["R", -2]], [["T", 1], ["T", -2]],
    [["T", 2], ["R", -2]], [["R", 2], ["R", -1]], [["T", 2], ["R", -1]], [["R", 1], ["R", -1]], [["R", 2], ["R", -2]],
    [["R", 2], ["R", -2]], [["R", 1], ["R", -1]], [["R", 2], ["T", -1]], [["T", 2], ["T", -1]], [["T", 2], ["R", -2]],
    [["R", 2], ["R", -2]], [["T", 2], ["R", -2]], [["T", 2], ["T", -2]], [["T", 1], ["R", -1]], [["T", 2], ["T", -2]],
    [["T", 1], ["T", -2]], [["R", 1], ["R", -2]], [["T", 1], ["T", -1]], [["R", 1], ["R", -2]], [["T", 2], ["R", -2]],
    [["T", 2], ["R", -1]], [["T", 1], ["R", -1]], [["R", 1], ["R", -1]], [["T", 1], ["T", -2]], [["T", 1], ["T", -1]],
    [["R", 2], ["T", -1]], [["T", 1], ["T", -2]], [["T", 2], ["R", -1]], [["T", 1], ["R", -1]], [["T", 2], ["T", -2]],
    [["R", 2], ["T", -2]], [["T", 1], ["R", -2]], [["T", 2], ["R", -2]], [["R", 2], ["T", -2]], [["R", 1], ["R", -2]],
    [["R", 2], ["T", -2]], [["T", 1], ["T", -2]], [["R", 2], ["R", -1]], [["T", 2], ["T", -2]], [["R", 2], ["T", -2]],
    [["R", 2], ["R", -2]], [["R", 1], ["T", -2]], [["T", 1], ["R", -1]], [["T", 2], ["T", -1]], [["R", 2], ["T", -2]],
    [["R", 1], ["R", -1]], [["R", 1], ["T", -2]], [["R", 2], ["R", -2]], [["R", 2], ["T", -1]], [["R", 1], ["R", -2]],
    [["R", 2], ["R", -1]], [["R", 1], ["T", -1]], [["R", 2], ["T", -2]], [["T", 2], ["R", -1]], [["T", 1], ["T", -2]],
    [["T", 1], ["T", -2]], [["T", 1], ["T", -1]], [["T", 1], ["T", -1]], [["T", 2], ["T", -1]], [["R", 2], ["R", -1]],
    [["R", 2], ["T", -1]], [["R", 1], ["T", -2]], [["R", 1], ["T", -1]], [["R", 2], ["T", -1]], [["T", 2], ["R", -1]],
    [["T", 2], ["T", -2]], [["T", 1], ["T", -1]], [["T", 2], ["R", -2]], [["T", 1], ["R", -1]]];

  this.setup = function() {
    var FixationDot = new app.shapes.dotClass(app.grids.horizontal, 6.5, 'yellow');
    FixationDot.new(0,0).show();
  }

  this.run = function(param, done) {
    var Triangle = new app.shapes.triangleClass(app.grids.horizontal, 1, 3, 'white');
    var Rectangle = new app.shapes.rectangleClass(app.grids.horizontal, 1, 3, 'white');

    var drawShape = function(arr) {
      var shape = arr[0] == "R" ? Rectangle.new(arr[1], 1) : Triangle.new(arr[1], 1);
      shape.show();
      return shape;
    }

    setTimeout(function() {
      var right = drawShape(param[0]);
      var left = drawShape(param[1]);
      right.show();
      left.show();

      setTimeout(done(function() {
        right.hide();
        left.hide();
      }), 500);
    }, 1500)
  }
}
app.controllers.nt.shapeComparison = app.buildTrialController(controller);
